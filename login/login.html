
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <title>Inscrição</title>
</head>

<body>

    <div id="central-block">
        <h1>ENTRE EM SUA CONTA!</h1>
            <div class="inputs">

                <p class="p-insert" class="Writting-index">INSIRA O SEU <span class="span-sigin">USUÁRIO</span></p>
                <input type="text" id="input-nome-login" class="inserts">

              </div>
        
            <div class="inputs">
                <p class="p-insert" class="Writting-index">INSIRA UMA <span class="span-sigin">SENHA</span></p>

                <input type="text" id="input-user-login" class="inserts">
            
            </div>
                <div id="button-enter"><button id="button">ENTRAR</button></div>

                <h2 class="Writting-index">AINDA NÃO POSSUI CADASTRO? <span><a href="http://127.0.0.1:5500/Gbit/sigIn/sigin.html"
                            class="span-sigin">CADASTRE-SE</a></span></h2>

                            <div id="h2-name-div"><h2 id="h2-name-gbit">GBIT <  ></h2></div>
   </div>

    <script>
    document.getElementById('button').addEventListener('click',()=>{
            let name = document.getElementById('input-nome-login').value
        let password = document.getElementById('input-user-login').value
        console.log(name,password)
        fetch('https://musicapig.herokuapp.com/users/login',{
            method:'POST',
            headers:{
                'Content-Type':"application/json"
                
            },
            body:JSON.stringify({
                username:name,
                password:password
            })
        }).then(response => verificaLogin(response)) //response não está definida   
    })
    async function verificaLogin(response){
        const { message } =  await response.json()
        const { status } = response

        if(status == 500){
            alert(`erro no servidor: ${message}`)
        }else if(status == 401){
            alert(message)
        }else if(status == 404){
            alert(message)
        }else if(status == 200){
            alert (message)
            window.location.href = "http://127.0.0.1:5500/index.html"
        }
/*         if(resposta.log == 'user confimed'){
            alert('usuario confirmado')
            window.location.href = "http://127.0.0.1:5500/index.html"
        }else{
            alert('usuário não encontrado')
        } */
    }
</script>
</body>
</html>
